<!DOCTYPE html>
<html>
	<head>
		<title>Kevin | {% block title %}{% endblock %}</title>

		<!--  STYLE  -->
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style/layout.css') }}">
		<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
		{% block css %}{% endblock %}

		<!--  META  -->
		<meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
		<meta name="language" content="IT" />
		<meta name="author" content="Andreanelli Bartocetti Parri Mariotti" />
		<meta name="owner" content="Andreanelli Bartocetti Parri Mariotti" />
		<meta name="reply-to" content="" />
		<meta name="description" content="forum kevin" />
		<meta name="keywords" content="kevin forum contenuti" />
		<meta name="viewport" content="width=device-width">
		
		<!--  JS  --> 
		<script src="https://kit.fontawesome.com/2e6be9a3fe.js" crossorigin="anonymous"></script>
		<script src="{{ url_for('static', filename='js/up.js') }}"></script>
		{% block js %}{% endblock %}
	</head>

	<body>
		{% if (nav | default("there", false)) %}
			<nav class="menu">
				<ul class="navbar">
					<li class="button"><a href=".."><i class="fas fa-home"></i> Home</a></li>
					<li class="button"><a href=".."><i class="fas fa-globe-americas"></i> News & Attualit&agrave;</a></li>
					<li class="button"><a href=".."><i class="fas fa-cat"></i> Meme</a></li>
					<li class="button"><a href=".."><i class="fas fa-code"></i> Informatica</a></li>
					<li class="button"><a href=".."><i class="fas fa-flask"></i> Scienza</a></li>
					<li class="button"><a href=".."><i class="fas fa-feather-alt"></i> Dev's Blog</a></li>
					<div id="not_logged_buttons">
						<li class="button rbutton"><a href="login" style="margin-right: 2vh">Login</a></li>
						<li class="button rbutton"><a href="register">Register</a></li>
					</div>

					<div id="logged_buttons">
						<li class="button rbutton"><a href="user" style="margin-right: 2vh"><i class="fas fa-user"></i> Profile</a></li>
						<li class="button rbutton"><a href="logout"><i class="fas fa-user-slash"></i> Logout</a></li>
						<li class="button rbutton"><a href="../create_post"><i class="fas fa-plus-square"></i> Crea Post</a></li>
					</div>
				</ul>
			</nav>	
		{% endif %}

		<main>{% block content %}{% endblock %}</main>

		<div id="popup-lightbox">
			<div id="cookie-popup">
				<div id="popup-content">
					<div id="popup-hey">Hey!</div>
					<div id="popup-text">This site uses cookies. If you agree with that, click "I Agree"</i>. If you don't, we are sorry but you can't use our site.</div>
					<div id="popup-buttons">
						<a href="https://google.com"><span class="popup-button">I <b>DON'T</b> agree</span></a>
						<span class="popup-button" onclick="close_cookie_popup();">I Agree</span>
					</div>
				</div>
			</div>
		</div>

		{% if (footer | default("there", false)) %}
			<nav class="footer">
				<span class="fbutton"><a href=".."><i class="fas fa-users"></i> About</span></a>
				<span class="fbutton"><a href="#"><i class="fas fa-tools"></i> Supporto</span></a>
				<span class="fbutton"><a href="#"><i class="fab fa-github"></i> Github</span></a>
				<span><a href='#' title='Torna su'><i class="far fa-arrow-alt-circle-up"></i></a></span>
			</nav>
		{% endif %}
	</body>

	<script>
		function close_cookie_popup() {
			var popup = document.getElementById("popup-lightbox");
			popup.parentNode.removeChild(popup);
			localStorage.setItem("cookie-accepted", 1);
		}

		// Check if user has already accepted it
		if (localStorage.getItem("cookie-accepted") == 1) {
			close_cookie_popup();
		}

		// Check if it's logged in
		if (document.cookie.includes('access_token') && document.cookie.includes('refresh_token')) {
			document.getElementById("not_logged_buttons").style.display = 'none';
			document.getElementById("logged_buttons").style.display = 'unset';
		} else {
			document.getElementById("not_logged_buttons").style.display = 'unset';
			document.getElementById("logged_buttons").style.display = 'none';
		}

		{% if alert %}
			// If there's an alert, return with an alert box
			alert("{{alert}}");
		{% endif %}
	</script>
</html>
